<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<input type="hidden" name="pageSelected" value="" />
</head>
<body>
<div class="page-header">
    <div class="container">
        <h1>TMA LOG ANALYZING</h1>
    </div>
</div>
<div style="margin-left: 50px; margin-right: 50px">
	<h4>Select Number of Rows</h4>
	<div class="form-group">
		<select name="state" id="maxRows" class="form-control" style="width:150px;">
			<option value="5000">Show All</option>
			<option value="10">10</option>
			<option value="20">20</option>
			<option value="50">50</option>
			<option value="100">20</option>
		</select>
	</div>
	<div style="overflow-x:scroll;">
		<table id="mytable" class="table table-bordered table-striped">
			<thead>
				<tr class="filters">
					<th width="50px">No</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">Test case Name:</label>
							<input type="text" class="form-control">
						</div>
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">Excuted By:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">Time Start:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">LocalIP:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">Imei:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">FSN:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">module:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">Revision:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">fw:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">ICCID:</label>
							<input type="text" class="form-control">
					</th>
					<th class="col-sm-1">
						<div class="form-group">
							<label for="usr">Status:</label>
							<input type="text" class="form-control">
					</th>
				</tr>
			</thead>
			<tbody>
			<% for(var i = 0; i < data.length; i++) {%>
				<tr>
					<td><%= i + 1%></td>
					<td class="c1"><%=data[i].testCaseName%></td>
					<td class="c1"><%=data[i].executedBy %></td>
					<td class="c1"><%=data[i].timeStart %></td>
					<td class="c1"><%=data[i].localIP%></td>
					<td class="c1"><%=data[i].imei%></td>
					<td class="c1"><%=data[i].fsn%></td>
					<td class="c1"><%=data[i].module%></td>
					<td class="c1"><%=data[i].revision%></td>
					<td class="c1"><%=data[i].fw%></td>
					<td class="c1"><%=data[i].iccid%></td>
					<td class="c1"><%=data[i].status%></td>
				</tr>
			<% } %>
			</tbody>
		</table>
	</div>
	<div class="pagination-container">
		<nav>
			<ul class="pagination"></ul>
		</nav>
	</div>
</div>
</body>
<script>


    $(document).ready(function(){
        $('.filters input').keyup(function(e){
            /* Ignore tab key */
            var code = e.keyCode || e.which;
            if (code == '9') return;
            /* Useful DOM data and selectors */
            var elements = document.getElementsByClassName("filter");
            var table = '#mytable';
            $(table+' tr:gt(0)').each(function(){
                var $tds = $(this).find('td');
                if($tds != null){
                    var enable = true;
                    for(var i = 1 ; i < $tds.length; i++){
                        if(elements[i-1].value.length > 0){
                            if($tds[i].innerText.toUpperCase().indexOf(elements[i-1].value) <= -1){
                                enable = false;
                                break;
                            }
                        }
                    }
                    if(enable){
                        $(this).addClass('on')
                        $(this).show()
                    }else{
                        $(this).removeClass()
                        $(this).hide()
                    }
                }
            })
        });
    });
	
	
	/* Paging */
	var table = '#mytable'
	$('#maxRows').on('change', function(){
		$('.pagination').html('')
		var trnum = 0
		var maxRows = parseInt($(this).val())
		var totalRows = $(table+' tbody tr').length
		$(table+' tr:gt(0)').each(function(){
			trnum++
			if(trnum > maxRows){
				$(this).hide()
			}
			if(trnum <= maxRows){
				$(this).show()
			}
		})
		if(totalRows > maxRows){
			var pagenum = Math.ceil(totalRows/maxRows)
			for(var i = 1;i <= pagenum;){
				if(i <= 5){
					$('.pagination').append('<li data-page="'+i+'">\<span>'+ i++ +'<span class="sr-only">(current)</span></span>\</li>').show()
				}else{
					$('.pagination').append('<li data-page="next">\<span>\><span class="sr-only">(current)</span></span>\</li>').show()
					break;
				}
				
			}
		}
		$('.pagination li:first-child').addClass('active')
		$('.pagination li').on('click', function(){
			var pageNum = $(this).attr('data-page')
			var trIndex = 0;
			$('.pagination li').removeClass('active')
			$(this).addClass('active')
			$(table+' tr:gt(0)').each(function(){
				trIndex++
				if(trIndex > (maxRows*pageNum) || trIndex <= ((maxRows*pageNum)-maxRows)){
					$(this).hide()
				}else{
					$(this).show()
				}
			})
		})
	})
</script>
</html>